ARM GAS  C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"pid.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.PID_Control,"ax",%progbits
  18              		.align	1
  19              		.global	PID_Control
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	PID_Control:
  27              	.LVL0:
  28              	.LFB0:
  29              		.file 1 "mylib/pid.c"
   1:mylib/pid.c   **** #include "pid.h"
   2:mylib/pid.c   **** #include "math.h"
   3:mylib/pid.c   **** 
   4:mylib/pid.c   **** #define Limit(value,max)     if(value>max)value=max;else if(value<-max)value=-max
   5:mylib/pid.c   **** float PID_Control(PID_S *PID,float target,float now){
  30              		.loc 1 5 53 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
   6:mylib/pid.c   ****   float err;
  35              		.loc 1 6 3 view .LVU1
   7:mylib/pid.c   ****   float err_dt;
  36              		.loc 1 7 3 view .LVU2
   8:mylib/pid.c   ****   float result;
  37              		.loc 1 8 3 view .LVU3
   9:mylib/pid.c   ****   
  10:mylib/pid.c   ****   err=target-now;
  38              		.loc 1 10 3 view .LVU4
  39              		.loc 1 10 6 is_stmt 0 view .LVU5
  40 0000 30EE600A 		vsub.f32	s0, s0, s1
  41              	.LVL1:
  11:mylib/pid.c   ****   
  12:mylib/pid.c   ****   err_dt=err-PID->last_err;
  42              		.loc 1 12 3 is_stmt 1 view .LVU6
  43              		.loc 1 12 17 is_stmt 0 view .LVU7
  44 0004 D0ED047A 		vldr.32	s15, [r0, #16]
  45              		.loc 1 12 9 view .LVU8
  46 0008 70EE677A 		vsub.f32	s15, s0, s15
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s 			page 2


  47              	.LVL2:
  13:mylib/pid.c   ****   
  14:mylib/pid.c   ****   
  15:mylib/pid.c   ****   err_dt*=0.384f;
  48              		.loc 1 15 3 is_stmt 1 view .LVU9
  49              		.loc 1 15 9 is_stmt 0 view .LVU10
  50 000c 9FED257A 		vldr.32	s14, .L12
  51 0010 27EE877A 		vmul.f32	s14, s15, s14
  52              	.LVL3:
  16:mylib/pid.c   ****   err_dt+=PID->last_d*0.615f;  //低通滤波 
  53              		.loc 1 16 3 is_stmt 1 view .LVU11
  54              		.loc 1 16 14 is_stmt 0 view .LVU12
  55 0014 D0ED067A 		vldr.32	s15, [r0, #24]
  56              		.loc 1 16 22 view .LVU13
  57 0018 DFED236A 		vldr.32	s13, .L12+4
  58 001c 67EEA67A 		vmul.f32	s15, s15, s13
  59              		.loc 1 16 9 view .LVU14
  60 0020 77EE877A 		vadd.f32	s15, s15, s14
  61              	.LVL4:
  17:mylib/pid.c   ****   
  18:mylib/pid.c   ****   
  19:mylib/pid.c   ****   PID->last_err=err;
  62              		.loc 1 19 3 is_stmt 1 view .LVU15
  63              		.loc 1 19 16 is_stmt 0 view .LVU16
  64 0024 80ED040A 		vstr.32	s0, [r0, #16]
  20:mylib/pid.c   ****   if(fabsf(err)<PID->I_ERR_LIMIT){
  65              		.loc 1 20 3 is_stmt 1 view .LVU17
  66              		.loc 1 20 6 is_stmt 0 view .LVU18
  67 0028 F0EEC06A 		vabs.f32	s13, s0
  68              		.loc 1 20 20 view .LVU19
  69 002c 90ED087A 		vldr.32	s14, [r0, #32]
  70              		.loc 1 20 5 view .LVU20
  71 0030 F4EEC76A 		vcmpe.f32	s13, s14
  72 0034 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  73 0038 09D5     		bpl	.L2
  21:mylib/pid.c   ****     PID->i+=err*PID->I_TIME;
  74              		.loc 1 21 5 is_stmt 1 view .LVU21
  75              		.loc 1 21 20 is_stmt 0 view .LVU22
  76 003a 90ED077A 		vldr.32	s14, [r0, #28]
  77              		.loc 1 21 16 view .LVU23
  78 003e 67EE006A 		vmul.f32	s13, s14, s0
  79              		.loc 1 21 11 view .LVU24
  80 0042 90ED037A 		vldr.32	s14, [r0, #12]
  81 0046 37EE267A 		vadd.f32	s14, s14, s13
  82 004a 80ED037A 		vstr.32	s14, [r0, #12]
  83              	.L2:
  22:mylib/pid.c   ****   } 
  23:mylib/pid.c   ****   
  24:mylib/pid.c   ****   
  25:mylib/pid.c   ****   Limit(PID->i,PID->i_max);
  84              		.loc 1 25 3 is_stmt 1 view .LVU25
  85 004e D0ED036A 		vldr.32	s13, [r0, #12]
  86 0052 90ED057A 		vldr.32	s14, [r0, #20]
  87 0056 F4EEC76A 		vcmpe.f32	s13, s14
  88 005a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  89 005e 16DD     		ble	.L11
  90              		.loc 1 25 3 discriminator 1 view .LVU26
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s 			page 3


  91 0060 80ED037A 		vstr.32	s14, [r0, #12]
  92              	.L6:
  26:mylib/pid.c   ****   PID->last_d=err_dt;
  93              		.loc 1 26 3 view .LVU27
  94              		.loc 1 26 14 is_stmt 0 view .LVU28
  95 0064 C0ED067A 		vstr.32	s15, [r0, #24]
  27:mylib/pid.c   ****   
  28:mylib/pid.c   ****   result = err * PID->KP  +   err_dt * PID->KD   +   PID->i * PID->KI;
  96              		.loc 1 28 3 is_stmt 1 view .LVU29
  97              		.loc 1 28 21 is_stmt 0 view .LVU30
  98 0068 D0ED000A 		vldr.32	s1, [r0]
  99              	.LVL5:
 100              		.loc 1 28 16 view .LVU31
 101 006c 20EE800A 		vmul.f32	s0, s1, s0
 102              	.LVL6:
 103              		.loc 1 28 43 view .LVU32
 104 0070 90ED017A 		vldr.32	s14, [r0, #4]
 105              		.loc 1 28 38 view .LVU33
 106 0074 67EE277A 		vmul.f32	s15, s14, s15
 107              	.LVL7:
 108              		.loc 1 28 27 view .LVU34
 109 0078 70EE277A 		vadd.f32	s15, s0, s15
 110              		.loc 1 28 57 view .LVU35
 111 007c 90ED030A 		vldr.32	s0, [r0, #12]
 112              		.loc 1 28 66 view .LVU36
 113 0080 90ED027A 		vldr.32	s14, [r0, #8]
 114              		.loc 1 28 61 view .LVU37
 115 0084 20EE070A 		vmul.f32	s0, s0, s14
 116              	.LVL8:
  29:mylib/pid.c   ****   return result;
 117              		.loc 1 29 3 is_stmt 1 view .LVU38
  30:mylib/pid.c   **** }
 118              		.loc 1 30 1 is_stmt 0 view .LVU39
 119 0088 37EE800A 		vadd.f32	s0, s15, s0
 120              	.LVL9:
 121              		.loc 1 30 1 view .LVU40
 122 008c 7047     		bx	lr
 123              	.LVL10:
 124              	.L11:
  25:mylib/pid.c   ****   PID->last_d=err_dt;
 125              		.loc 1 25 3 is_stmt 1 discriminator 2 view .LVU41
 126 008e B1EE477A 		vneg.f32	s14, s14
 127 0092 F4EEC76A 		vcmpe.f32	s13, s14
 128 0096 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 129 009a E3D5     		bpl	.L6
  25:mylib/pid.c   ****   PID->last_d=err_dt;
 130              		.loc 1 25 3 discriminator 3 view .LVU42
 131 009c 80ED037A 		vstr.32	s14, [r0, #12]
 132 00a0 E0E7     		b	.L6
 133              	.L13:
 134 00a2 00BF     		.align	2
 135              	.L12:
 136 00a4 A69BC43E 		.word	1053072294
 137 00a8 A4701D3F 		.word	1058893988
 138              		.cfi_endproc
 139              	.LFE0:
 141              		.section	.text.reset_PID,"ax",%progbits
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s 			page 4


 142              		.align	1
 143              		.global	reset_PID
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	reset_PID:
 150              	.LVL11:
 151              	.LFB1:
  31:mylib/pid.c   **** 
  32:mylib/pid.c   **** void reset_PID(PID_S * s){
 152              		.loc 1 32 26 view -0
 153              		.cfi_startproc
 154              		@ args = 0, pretend = 0, frame = 0
 155              		@ frame_needed = 0, uses_anonymous_args = 0
 156              		@ link register save eliminated.
  33:mylib/pid.c   ****   s->i=0;
 157              		.loc 1 33 3 view .LVU44
 158              		.loc 1 33 7 is_stmt 0 view .LVU45
 159 0000 0023     		movs	r3, #0
 160 0002 C360     		str	r3, [r0, #12]	@ float
  34:mylib/pid.c   ****   s->last_err=0;
 161              		.loc 1 34 3 is_stmt 1 view .LVU46
 162              		.loc 1 34 14 is_stmt 0 view .LVU47
 163 0004 0361     		str	r3, [r0, #16]	@ float
  35:mylib/pid.c   ****   s->last_d=0;
 164              		.loc 1 35 3 is_stmt 1 view .LVU48
 165              		.loc 1 35 12 is_stmt 0 view .LVU49
 166 0006 8361     		str	r3, [r0, #24]	@ float
  36:mylib/pid.c   **** }
 167              		.loc 1 36 1 view .LVU50
 168 0008 7047     		bx	lr
 169              		.cfi_endproc
 170              	.LFE1:
 172              		.text
 173              	.Letext0:
 174              		.file 2 "mylib/pid.h"
 175              		.file 3 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 176              		.file 4 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 177              		.file 5 "c:\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 178              		.file 6 "c:\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 179              		.file 7 "c:\\arm_gcc\\arm-none-eabi\\include\\math.h"
ARM GAS  C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 pid.c
C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s:18     .text.PID_Control:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s:26     .text.PID_Control:00000000 PID_Control
C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s:136    .text.PID_Control:000000a4 $d
C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s:142    .text.reset_PID:00000000 $t
C:\Users\ncer\AppData\Local\Temp\cckgYfQp.s:149    .text.reset_PID:00000000 reset_PID

NO UNDEFINED SYMBOLS
